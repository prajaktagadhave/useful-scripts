<!DOCTYPE html>
<html>
<head>
    <title>Drawing Rectanles</title>
</head>
<body>
<style type="text/css">
.rectangle {
    position: absolute;
    margin: 0; padding: 0;
    display: block;
    content: '';
    background: rgba(0,0,0, 0.2);
}
</style>
<script type="text/javascript">
window.onmousedown = function(mouseStartEvent) {
    var mouseX = mouseStartEvent.clientX;
    var mouseY = mouseStartEvent.clientY;
    /* We now know that the user is interested in doing
       a click-drag event. So when they release the mouse,
       the drag is done. window.onmousemove could be used
       for an animation of sorts, but for this example, it
       doesn't need to be used.
    */
    window.onmouseup = function(mouseEndEvent) {
        /* Create the new div element to put on the page */
        var newDiv = document.createElement('div');
        /* Give it the css class specified in the CSS above */
        newDiv.className = 'rectangle';
        /* Store the mouseup coordinates on the page */
        var mouseEndX = mouseEndEvent.clientX;
        var mouseEndY = mouseEndEvent.clientY;
        var dX, dY;
        /* calculate where the top-left corner needs to be.  */
        if (mouseEndX < mouseX) { 
            newDiv.style.left = mouseEndX + 'px';
            newDiv.style.width = String(mouseX - mouseEndX) + 'px';
        } else {
            newDiv.style.left = mouseX + 'px';
            newDiv.style.width = String(mouseEndX - mouseX) + 'px';
        }
        if (mouseEndY < mouseY) {
            newDiv.style.top = mouseEndY + 'px';
            newDiv.style.height = String(mouseY - mouseEndY) + 'px';
        } else {
            newDiv.style.top = mouseY + 'px';
            newDiv.style.height = String(mouseEndY - mouseY) + 'px'; 
        }
        /* unbind this event handler, incase it needs to be used by 
           something else */
        window.onmouseup = undefined;
        document.body.appendChild(newDiv);
    }
}
</script>
</body>
</html>